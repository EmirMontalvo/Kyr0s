<div class="register-container">
    <mat-card>
        <div style="display: flex; flex-direction: column; align-items: center; padding: 20px 0;">
            <img src="assets/images/logo-text.png" alt="Kyros Barber"
                style="max-width: 200px; height: auto; margin-bottom: 15px;">
            <h2 style="margin: 0; font-size: 24px; font-weight: 500;">Crear Cuenta</h2>
            <p style="margin: 5px 0 0; color: #666;">Únete a la comunidad de Kyros</p>
        </div>
        <mat-card-content>
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

                <div class="avatar-upload">
                    <input type="file" (change)="onFileSelected($event)" accept="image/*" hidden #fileInput>
                    <div class="avatar-circle" (click)="fileInput.click()">
                        <img *ngIf="previewUrl" [src]="previewUrl" alt="Avatar Preview">
                        <mat-icon *ngIf="!previewUrl">camera_alt</mat-icon>
                    </div>
                    <span *ngIf="!previewUrl">Seleccionar foto de perfil</span>
                </div>

                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Nombre Completo</mat-label>
                    <input matInput formControlName="nombre" placeholder="Tu nombre">
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" type="email" placeholder="ejemplo@correo.com">
                    <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
                        Email inválido
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Contraseña</mat-label>
                    <input matInput formControlName="password" [type]="hidePassword ? 'password' : 'text'">
                    <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword"
                        [attr.aria-label]="'Ocultar contraseña'" [attr.aria-pressed]="hidePassword" type="button">
                        <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    <mat-hint>Mínimo 6 caracteres</mat-hint>
                </mat-form-field>

                <div class="actions">
                    <button mat-raised-button color="primary" type="submit"
                        [disabled]="loading || registerForm.invalid">
                        {{ loading ? 'Registrando...' : 'Registrarme' }}
                    </button>
                </div>
            </form>
        </mat-card-content>
        <mat-card-footer>
            <p>¿Ya tienes cuenta? <a routerLink="/login">Inicia Sesión</a></p>
        </mat-card-footer>
    </mat-card>
</div>